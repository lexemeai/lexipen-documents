# استفاده از سرویس بازشناسی گفتار LexiPen 

## مقدمه
این سند راهنمای استفاده از دو سرویس بازشناسی گفتار (whisper_file و whisper_streaming) است.

---

## احراز هویت
قبل از استفاده از API، باید با استفاده از سیستم احراز هویت JWT وارد شوید.

### **ثبت نام کاربر جدید**
برای ثبت‌نام کاربر جدید، درخواست `POST` زیر را ارسال کنید:
```plaintext
http://localhost:8000/users/signup
```

### **ورود کاربر موجود**
اگر از قبل حساب کاربری دارید، وارد شوید:
```plaintext
http://localhost:8000/users/login
```

پس از ورود موفق، یک **توکن دسترسی** دریافت خواهید کرد. از این توکن در هدر `Authorization` برای درخواست‌های API استفاده کنید.

همچنین می‌توانید از API **تازه‌سازی توکن** در جنگو برای تمدید توکن خود استفاده کنید.

---

## سرویس هوش مصنوعی Whisper File
سرویس `whisper_file` امکان تبدیل صوت و ویدئو به متن را فراهم می‌کند.

### **۱. ارسال لینک فایل صوتی برای تبدیل به متن**
- **آدرس:** `POST /stt_file/url/`
- **نیاز به احراز هویت:** بله
- **بدنه درخواست:**
  ```json
  {
    "url": "https://example.com/audio.mp3",
    "timestamp": true
  }
  ```
- **پاسخ:**
  ```json
  {
    "task_id": "12345abcde",
    "status": "pending",
    "message": "وظیفه تبدیل متن با موفقیت ایجاد شد."
  }
  ```

### **۲. آپلود فایل صوتی برای تبدیل به متن**
- **آدرس:** `POST /stt_file/upload/`
- **نیاز به احراز هویت:** بله
- **بدنه درخواست:** فرم داده چندبخشی با یک فایل صوتی (`.mp3`، `.wav`، `.mp4` و غیره).
- **پاسخ:**
  ```json
  {
    "task_id": "67890fghij",
    "status": "pending",
    "message": "فایل با موفقیت آپلود و برای تبدیل به متن در صف قرار گرفت."
  }
  ```

### **۳. دریافت نتیجه تبدیل متن**
- **آدرس:** `GET /stt_file/result/{stt_result_key}/`
- **نیاز به احراز هویت:** بله
- **پاسخ:**
  ```json
  {
    "task_id": "12345abcde",
    "status": "completed",
    "transcription": "این متن تبدیل شده از فایل صوتی است."
  }
  ```

### **۴. لیست فایل‌های صوتی آپلود شده**
- **آدرس:** `GET /stt_file/list/`
- **نیاز به احراز هویت:** بله
- **پاسخ:**
  ```json
  {
    "files": [
      {"file_id": "1", "name": "audio1.mp3", "status": "completed"},
      {"file_id": "2", "name": "audio2.wav", "status": "pending"}
    ]
  }
  ```

### **۵. دریافت اطلاعات مدل**
- **آدرس:** `GET /stt_file/model_info/`
- **نیاز به احراز هویت:** بله
- **پاسخ:**
  ```json
  {
    "model": "Whisper v2.0",
    "language": "English",
    "accuracy": "98%"
  }
  ```

### **۶. به‌روزرسانی برنامه**
- **آدرس:** `POST /stt_file/update-application/`
- **نیاز به احراز هویت:** بله
- **بدنه درخواست:** فرم داده چندبخشی با یک فایل ZIP.
- **پاسخ:**
  ```json
  {
    "message": "برنامه با موفقیت به‌روزرسانی شد."
  }
  ```

### **۷. دریافت اطلاعات UniKey**
- **آدرس:** `GET /api/unikey-data/`
- **نیاز به احراز هویت:** بله
- **پاسخ:**
  ```json
  {
    "unikey": {
      "status": "connected",
      "valid_until": "2025-12-31"
    }
  }
  ```

---

## سرویس استریم هوش مصنوعی
سرویس `whisper_streaming` امکان تبدیل صوت به متن را به صورت بلادرنگ از طریق WebSocket فراهم می‌کند.

### **۱. آپلود و تبدیل فایل صوتی**
- **آدرس:** `POST /stt_streaming/stream/`
- **نیاز به احراز هویت:** بله
- **بدنه درخواست:** فرم داده چندبخشی با یک فایل `.wav`.
- **پاسخ:**
  ```json
  {
    "session_id": "abcdef123456",
    "status": "streaming",
    "message": "جلسه استریم آغاز شد."
  }
  ```

### **۲. بررسی وضعیت سرور WebSocket**
- **آدرس:** `GET /stt_streaming/websocket-info/`
- **نیاز به احراز هویت:** بله
- **پاسخ:**
  ```json
  {
    "status": "connected",
    "message": "سرور WebSocket در حال اجرا است."
  }
  ```

---

## مستندات API
برای مشاهده لیست کامل API‌ها و فرمت درخواست‌ها، به لینک زیر مراجعه کنید:
```plaintext
http://localhost:8000/docs/
```

با استفاده از توکن دسترسی خود، می‌توانید درخواست‌های API را در Swagger UI آزمایش کنید.

---

## نتیجه‌گیری
این سرویس‌های هوش مصنوعی امکان تبدیل فایل‌های صوتی و ویدیویی به متن را به‌صورت آپلود فایل یا استریم بلادرنگ فراهم می‌کنند. قبل از ارسال درخواست‌ها احراز هویت را انجام دهید و مستندات را برای اطلاعات بیشتر بررسی کنید.


